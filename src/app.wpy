<script>
import wepy from 'wepy'
import 'wepy-async-function'

export default class extends wepy.app {
  config = {
    pages: [
      'pages/index',
      'pages/profile',
    ],
    window: {
      backgroundTextStyle: 'light',
      navigationBarBackgroundColor: '#fff',
      navigationBarTitleText: 'WeChat',
      navigationBarTextStyle: 'black'
    }
  }

  globalData = {
    userInfo: null
  }

  constructor () {
    super()
    this.use('requestfix')
  }

  onLaunch() {
    this.testAsync()
  }

  sleep (s) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('promise resolved')
      }, s * 1000)
    })
  }

  async testAsync () {
    const data = await this.sleep(3)
    console.log(data)
  }

  getUserInfo(cb) {
    const that = this
    if (this.globalData.userInfo) {
      return this.globalData.userInfo
    }
    wepy.getUserInfo({
      success (res) {
        that.globalData.userInfo = res.userInfo
        cb && cb(res.userInfo)
      }
    })
  }
}
</script>
<style lang="less">
html,body,page{
  height: 100%
}
.container{
  height:100%;
  position:relative
}
.content{
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom:50px;
}
.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
}

@font-face {
  font-family: 'iconfont';
  src: url(data:font/truetype;charset=utf-8;base64,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) format('truetype');
  font-weight: normal;
  font-style: normal;
}

.iconfont {
  font-family:"iconfont" !important;
  font-size:24px;
  font-style:normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.icon-yonghu-yuan:before { content: "\e623"; }
.icon-liebiao:before { content: "\e62d"; }
.icon-xia:before { content: "\e63c"; }

.selectarea{
  height:50px;
  position: fixed;
  width: 100%;
  left: 0;
  bottom: 0;
  font-size: 15px;
  background: #fff
}
.nav-left,.nav-right{
  position: absolute;
  top:50%;
  transform:translateY(-50%)

}
.nav-left{
  left:15px;
}
.nav-right{
  right:15px;
}
</style>
